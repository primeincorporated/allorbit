{"version":3,"file":"mcp.min.js","sources":["..\\..\\..\\..\\source\\js\\mcp\\button_settings.js","..\\..\\..\\..\\source\\js\\mcp\\redactor_settings.js"],"names":["EditorButtons","jQuery","document","ready","getElementById","Styles_Wrap","$","find","bind","Styles_AddRow","CheckTypeDropdown","trigger","delegate","Styles_DelRow","Styles_SyncRows","Templates_Wrap","Templates_AddRow","Templates_DelRow","Templates_SyncRows","e","preventDefault","Cloned","clone","show","removeClass","appendTo","target","closest","fadeOut","remove","Value","val","Parent","hide","each","index","elem","findex","felem","Input","getAttribute","attr","replace","Editor","Server","Init","EditorSettings","ToggleSettingsSection","ToggleEditorSettingsWrapper","i","el","Holder","sortable","connectWith","containment","helper","Event","HTML","hasClass","wrap","parent","html","stop","UI","item","removeAttr","append","disableSelection","ToggleUploadService","change","FieldtypeSelect","PreviousFieldtype","addClass","Field","value","window","location","href","indexOf"],"mappings":"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","sourcesContent":["if (typeof EditorButtons === 'undefined') var EditorButtons = {};\n// ********************************************************************************* //\n\njQuery(document).ready(function(){\n\n    if (document.getElementById('btn_styles')){\n        EditorButtons.Styles_Wrap = $('#btn_styles');\n        EditorButtons.Styles_Wrap.find('.add_style').bind('click', EditorButtons.Styles_AddRow);\n        EditorButtons.Styles_Wrap.find('.typesel select').bind('change', EditorButtons.CheckTypeDropdown).trigger('change');\n        EditorButtons.Styles_Wrap.delegate('a.delete', 'click', EditorButtons.Styles_DelRow);\n        EditorButtons.Styles_SyncRows();\n    }\n\n    if (document.getElementById('btn_templates')){\n        EditorButtons.Templates_Wrap = $('#btn_templates');\n        EditorButtons.Templates_Wrap.find('.add_template').bind('click', EditorButtons.Templates_AddRow);\n        EditorButtons.Templates_Wrap.delegate('a.delete', 'click', EditorButtons.Templates_DelRow);\n        EditorButtons.Templates_SyncRows();\n    }\n});\n\n// ********************************************************************************* //\n\nEditorButtons.Styles_AddRow = function(e){\n    e.preventDefault();\n    var Cloned = EditorButtons.Styles_Wrap.find('tbody.styles_rows').find('.dummy').clone();\n    Cloned.show().removeClass('dummy');\n\n    Cloned.appendTo(EditorButtons.Styles_Wrap.find('tbody.styles_rows'));\n    EditorButtons.Styles_SyncRows();\n};\n\n// ********************************************************************************* //\n\nEditorButtons.Styles_DelRow = function(e){\n    e.preventDefault();\n\n    $(e.target).closest('tr').fadeOut('slow', function(){\n        $(e.target).closest('tr').remove();\n        EditorButtons.Styles_SyncRows();\n    });\n};\n\n// ********************************************************************************* //\n\nEditorButtons.CheckTypeDropdown = function(e){\n    var Value = $(e.target).val();\n    var Parent = $(e.target).closest('td');\n\n    if (Value == 'custom') {\n        Parent.find('input').show();\n    } else {\n        Parent.find('input').hide();\n    }\n}\n\n// ********************************************************************************* //\n\nEditorButtons.Styles_SyncRows = function(){\n    EditorButtons.Styles_Wrap.find('tbody.styles_rows').find('tr').each(function(index, elem){\n        // Find all form inputs\n        $(elem).find(':input').each(function(findex, felem){\n            var Input = $(felem);\n            if (!felem.getAttribute('name')) return false;\n\n            // Get it's attribute and change it\n            var attr = Input.attr('name').replace(/settings\\[styles\\]\\[.*?\\]/, 'settings[styles][' + (index) + ']');\n            Input.attr('name', attr);\n        });\n    });\n};\n\n// ********************************************************************************* //\n\n// ********************************************************************************* //\n\nEditorButtons.Templates_AddRow = function(e){\n    e.preventDefault();\n    var Cloned = EditorButtons.Templates_Wrap.find('tbody.templates_rows').find('.dummy').clone();\n    Cloned.show().removeClass('dummy');\n\n    Cloned.appendTo(EditorButtons.Templates_Wrap.find('tbody.templates_rows'));\n    EditorButtons.Templates_SyncRows();\n};\n\n// ********************************************************************************* //\n\nEditorButtons.Templates_DelRow = function(e){\n    e.preventDefault();\n\n    $(e.target).closest('tr').fadeOut('slow', function(){\n        $(e.target).closest('tr').remove();\n        EditorButtons.Templates_SyncRows();\n    });\n};\n\n// ********************************************************************************* //\n\nEditorButtons.Templates_SyncRows = function(){\n    EditorButtons.Templates_Wrap.find('tbody.templates_rows').find('tr').each(function(index, elem){\n        // Find all form inputs\n        $(elem).find(':input').each(function(findex, felem){\n            var Input = $(felem);\n            if (!felem.getAttribute('name')) return false;\n\n            // Get it's attribute and change it\n            var attr = Input.attr('name').replace(/settings\\[templates\\]\\[.*?\\]/, 'settings[templates][' + (index) + ']');\n            Input.attr('name', attr);\n        });\n    });\n};\n\n// ********************************************************************************* //\n","var Editor = Editor ? Editor : {};\nEditor.Server = {};\n// ********************************************************************************* //\n\nEditor.Init = function() {\n\n    Editor.EditorSettings = $('.EditorField');\n    Editor.EditorSettings.find('.dmenu').delegate('a', 'click', Editor.ToggleSettingsSection);\n    Editor.EditorSettings.find('.editor_settings_toggler').delegate('input[type=radio]', 'click', Editor.ToggleEditorSettingsWrapper);\n\n    Editor.EditorSettings.each(function(i, el){\n        $(el).find('.editor_settings_toggler').find('input:checked').trigger('click');\n    });\n\n    Editor.EditorSettings.find('.tbuttons').each(function(i, e){\n        var Holder = $(e);\n\n        Holder.find('.redactor_toolbar').sortable({\n            connectWith: '.redactor_toolbar',\n            containment: Holder,\n            appendTo: 'body',\n            helper: function(Event){\n                var HTML = '';\n\n                if ( jQuery(Event.target).hasClass('redactor_separator') === true ) {\n                    HTML = jQuery(Event.target).clone().wrap('<p>').parent().html();\n                    return $( \"<ul class='redactor_toolbar' style='width:10px;height:25px;margin:0'>\"+HTML+\"</ul>\" );\n                }\n                else {\n                    HTML = jQuery(Event.target).parent().clone().wrap('<p>').parent().html();\n                    return $( \"<ul class='redactor_toolbar' style='width:28px;height:25px;margin:0'>\"+HTML+\"</ul>\" );\n                }\n            },\n            stop: function(Event, UI){\n\n                if ( jQuery(Event.target).hasClass('buttons_avail') === true ) {\n\n                    UI.item.find('input').removeAttr('disabled');\n\n                    if (UI.item.hasClass('redactor_separator') === true) {\n                        jQuery(Event.target).append(UI.item.clone());\n                    }\n\n                } else {\n\n                    UI.item.find('input').attr('disabled', 'disabled');\n\n                    if (UI.item.hasClass('redactor_separator') === true) {\n                        UI.item.remove();\n                    }\n                }\n\n                // Just in case\n                Holder.find('.redactor_toolbar.buttons_current').find('input').removeAttr('disabled');\n                Holder.find('.redactor_toolbar.buttons_avail').find('input').attr('disabled', 'disabled');\n            }\n        }).disableSelection();\n    });\n\n    Editor.EditorSettings.find('.upload_service').delegate('input', 'click', Editor.ToggleUploadService).find('input:checked').trigger('click');\n\n    if (document.getElementById('field_type') !== null) {\n        $('#field_type').change(Editor.FieldtypeSelect);\n        Editor.PreviousFieldtype = $('#field_type').val();\n    }\n};\n\n//********************************************************************************* //\n\nEditor.ToggleSettingsSection = function(Event){\n    Event.preventDefault();\n    Editor.EditorSettings.find('.dmenu').find('li').removeClass('current');\n    $(Event.target).parent().addClass('current');\n\n    Editor.EditorSettings.find('.tabholder:visible').hide();\n    Editor.EditorSettings.find('.tabholder.' + Event.target.getAttribute('data-section')).show();\n};\n\n//********************************************************************************* //\n\nEditor.ToggleEditorSettingsWrapper = function(Event){\n    var Field = $(Event.target).closest('.EditorField');\n    Field.find('.editor_settings_wrapper').hide();\n    Field.find('.editor_settings_' + Event.target.value).show();\n};\n\n//********************************************************************************* //\n\nEditor.ToggleUploadService = function(Event){\n    var Parent = $(Event.target).closest('table');\n\n    Parent.find('.upload_wrapper').hide();\n    Parent.find('.upload_' + Event.target.value).show();\n};\n\n//********************************************************************************* //\n\nEditor.FieldtypeSelect = function(Event){\n    var Target = $(Event.target);\n    if (window.location.href.indexOf('field_id=') == -1) return;\n    if (Editor.PreviousFieldtype == 'textarea' || Editor.PreviousFieldtype == 'text' || Editor.PreviousFieldtype == 'rte') {\n        Editor.EditorSettings.find('.editor_fieldtype_toggler').show().find('input:first').trigger('click');\n    }\n};\n\n//********************************************************************************* //\n"]}