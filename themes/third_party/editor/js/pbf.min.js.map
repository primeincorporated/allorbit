{"version":3,"file":"pbf.min.js","sources":["../../../../source/js/pbf/editor_helper.js","../../../../source/js/pbf/redactor_plugins/channel_images.js","../../../../source/js/pbf/redactor_plugins/dd_keyboard_shortcuts.js","../../../../source/js/pbf/redactor_plugins/link.js","../../../../source/js/pbf/redactor_plugins/native/fontcolor.js","../../../../source/js/pbf/redactor_plugins/native/fontfamily.js","../../../../source/js/pbf/redactor_plugins/native/fontsize.js","../../../../source/js/pbf/redactor_plugins/native/fullscreen.js","../../../../source/js/pbf/redactor_plugins/native/textdirection.js","../../../../source/js/pbf/redactor_plugins/paste_plain.js","../../../../source/js/pbf/redactor_plugins/styles.js","../../../../source/js/pbf/redactor_plugins/templates.js"],"names":["global","$","initMatrix","Matrix","bind","cell","$textarea","dom","$td","config","Editor","matrixColConfigs","col","id","field","row","Math","floor","random","replace","attr","jQuery","redactor","addClass","Handlebars","RedactorPlugins","contentElementsConfig","gridConfig","document","ready","window","registerHelper","value","this","parentIndex","Number","dropdownShowCallback","options","redactorBox","getBox","trigger","UploadCallback","TriggerRedactorCleanup","i","setTimeout","sync","opts","visual","toggle","openModal","btnName","buttonElem","btnObject","event","ChannelImages","channel_images","init","button","index","inArray","buttons","console","log","isEmptyObject","buttonAddFirst","buttonAddAfter","length","removeClass","html","dd_keyboard_shortcuts","$editor","parent","on","proxy","e","key","which","ctrl","ctrlKey","metaKey","preventDefault","selectionSave","tdata","showSitePages","showNavee","sitePages","site_pages","modalInit","Templates","plugins_link","modalInitCallback","modal","tabSelected","insert_link_node","sel","getSelection","url","text","target","elem","getParent","par","get","tagName","href","toString","find","val","thref","self","location","search","tab","modalSetTab","call","focus","click","insertLink","link","targetBlank","pattern","re","RegExp","re2","linkProtocol","protocol","extra","browser","linkInsert","trim","linkObserver","$link","hasClass","size","pos","offset","iframe","posFrame","$frame","top","scrollTop","left","tooltip","undefined","substring","aLink","linkObserverTooltipClose","aEdit","curLang","edit","aUnlink","unlink","execCommand","append","css","remove","buttonRemove","fontcolor","colors","name","$dropdown","pickerBuild","$toolbar","btn","buttonAdd","$button","dropdownShow","data","rule","_self","onSwatch","$this","pickerSet","len","z","color","$swatch","$elNone","none","type","bufferSet","inlineRemoveStyle","inlineSetStyle","air","$air","fadeOut","fontfamily","fonts","that","dropdown","each","s","title","callback","setFontfamily","resetFontfamily","fontsize","setFontsize","resetFontsize","fullscreen","toggleFullscreen","enableFullScreen","buttonChangeIcon","buttonActive","toolbarExternal","toolcss","boxcss","width","position","$box","fsheight","height","maxHeight","$fullscreenPlaceholder","insertAfter","appendTo","body","fullscreenIframe","fullScreenResize","resize","observeStart","disableFullScreen","buttonRemoveIcon","buttonInactive","off","insertBefore","autoresize","contents","contenteditable","dir","direction","ownerDocument","defaultView","iframeAddCss","fullpage","setFullpageOnInit","set","wym","toolbarHeight","pad","textdirection","ltrTextDirection","rtlTextDirection","blockSetAttr","blockRemoveAttr","plugins_paste_plain","savePaste","content","cleanParagraphy","selectionRestore","insertHtml","modalClose","paste_plain","applyStyle","getCurrent","className","toLowerCase","temp","substr","tmpl","settings","styles","attributes","attr_obj","split","styles_obj","selection","getSelectionHtml","selection_obj","alert","execStyle","classes","style","custom_type","evt","redactorObj","ii","btn_class","btn_style","data-key","applyTemplate","templates","dropdownElem","closest"],"mappings":"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","sourcesContent":[";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Handlebars = global.Handlebars = global.Handlebars || {};\n\n    Editor.matrixColConfigs = {};\n    Editor.contentElementsConfig = {};\n    Editor.gridConfig = {};\n\n    // ----------------------------------------------------------------------\n\n    jQuery(document).ready(function(){\n\n        if ('undefined' !== typeof window['Matrix']) initMatrix();\n    });\n\n    // ----------------------------------------------------------------------\n\n    Handlebars.registerHelper('setIndex', function(value){\n        this.parentIndex = Number(value);\n    });\n\n    // ----------------------------------------------------------------------\n\n    function initMatrix(){\n\n        Matrix.bind('editor', 'display', function(cell){\n            var $textarea = $('textarea', cell.dom.$td);\n            var config = Editor.matrixColConfigs[cell.col.id];\n            var id = cell.field.id+'_'+cell.row.id+'_'+cell.col.id+'_'+Math.floor(Math.random()*100000000);\n\n            id = id.replace(/\\[/, '_').replace(/\\]/, '');\n\n            $textarea.attr('id', id);\n\n            jQuery('#'+id).redactor(config);\n            cell.dom.$td.addClass('editor-matrix');\n        });\n    }\n\n    // ----------------------------------------------------------------------\n\n\n\n\n\n\n    Editor.dropdownShowCallback = function(options) {\n        var redactor = this;\n        var redactorBox = redactor.getBox();\n\n        redactorBox.trigger('redactor.dropdownshow', [redactor, options]);\n    };\n\n\n\n\n\n\n    Editor.UploadCallback = function(obj, json) {\n\n    };\n\n    // ----------------------------------------------------------------------\n\n\n\n    // ********************************************************************************* //\n\n    Editor.TriggerRedactorCleanup = function(redactor) {\n\n        for (var i = 0; i < 5; i++) {\n            setTimeout(function(){\n                redactor.sync();\n                redactor.opts.visual = false;\n                redactor.toggle();\n            }, (i*100));\n        };\n    };\n\n    // ********************************************************************************* //\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var ChannelImages = global.ChannelImages = global.ChannelImages || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.channel_images = {\n        init: function() {\n            var index = $.inArray('channel_images', this.opts.buttons);\n            var button;\n\n            if (index == -1) {\n                console.log('Editor: Channel Images plugin disabled - Not in buttons config');\n                return;\n            }\n\n            if ($.isEmptyObject(ChannelImages) === true) {\n                console.log('Editor: Channel Images plugin disabled - No Channel Images object found');\n                return;\n            }\n\n            if (index === 0) {\n                button = this.buttonAddFirst('channel_images', 'Channel Images', openModal);\n            } else {\n                button = this.buttonAddAfter(this.opts.buttons[index-1], 'channel_images', 'Channel Images', openModal);\n            }\n\n            if (!button || button.length === 0) return;\n\n            //\n            button.removeClass('redactor-btn-image');\n            //button.addClass('fa-redactor-btn');\n            button.html('<i class=\"dicon-images\"></i>');\n        }\n    };\n\n    // ----------------------------------------------------------------------\n\n    function openModal(btnName, buttonElem, btnObject, event) {\n        ChannelImages.openModal(btnName, buttonElem, btnObject, event, this);\n    }\n\n    // ----------------------------------------------------------------------\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.dd_keyboard_shortcuts = {\n        init: function() {\n            this.$editor.parent().on('keydown', $.proxy(function(e) {\n\n            //if (rtePaste) return false;\n\n            var key = e.which;\n            var ctrl = e.ctrlKey || e.metaKey;\n\n            //CTRL + D\n            if (ctrl && key === 68) {\n                e.preventDefault();\n                this.toggle();\n                return false;\n            }\n\n        }, this));\n        }\n    };\n\n    // ----------------------------------------------------------------------\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.link = {\n        init: function() {\n            var redactor = this;\n\n            var index = $.inArray('link', this.opts.buttons);\n            var button;\n\n            if (index == -1) return;\n\n            this.buttonRemove('link');\n\n            if (index === 0) {\n                button = this.buttonAddFirst('link', 'Link', openModal);\n            } else {\n                button = this.buttonAddAfter(this.opts.buttons[index-1], 'link', 'Link', openModal);\n            }\n\n            if (!button || button.length === 0) return;\n\n            this.linkObserver = $.proxy(linkObserver, redactor);\n        }\n    };\n\n    // ----------------------------------------------------------------------\n\n    function openModal(btnName, buttonElem, btnObject, event) {\n        var redactor = this;\n        redactor.selectionSave();\n\n        var tdata = {};\n        tdata.showSitePages = (Editor.site_pages);\n        tdata.showNavee = (Editor.navee);\n        tdata.sitePages = (Editor.site_pages) ? Editor.site_pages : '';\n\n        // title, content, width, callback\n        redactor.modalInit('Link', Editor.Templates.plugins_link(tdata), 600, $.proxy(modalInitCallback, redactor));\n    }\n\n    // ----------------------------------------------------------------------\n\n    function modalInitCallback() {\n        var redactor = this;\n        var modal = $('#redactor_modal');\n        var tabSelected = $('#redactor_tab_selected');\n\n        redactor.insert_link_node = false;\n\n        var sel = redactor.getSelection();\n        var url = '', text = '', target = '';\n\n        var elem = redactor.getParent();\n        var par = $(elem).parent().get(0);\n        if (par && par.tagName === 'A')\n        {\n            elem = par;\n        }\n\n        if (elem && elem.tagName === 'A')\n        {\n            url = elem.href;\n            text = $(elem).text();\n            target = elem.target;\n\n            redactor.insert_link_node = elem;\n        }\n        else text = sel.toString();\n\n        modal.find('.redactor_link_text').val(text);\n\n        var thref = self.location.href.replace(/\\/$/i, '');\n        url = url.replace(thref, '');\n        url = url.replace(/^\\/#/, '#');\n        //url = url.replace('mailto:', '');\n\n        if (url.search('mailto:') === 0) {\n            var tab = modal.find('.tab-email');\n            redactor.modalSetTab.call(redactor, 2);\n\n            tabSelected.val(2);\n            tab.find('.redactor_link').val(url.replace('mailto:', ''));\n        } else if ( $('#redactor_site_page').find(\"option[value='\"+url+\"']\").length > 0 ) {\n            redactor.modalSetTab.call(redactor, 3);\n\n            tabSelected.val(3);\n            $('#redactor_site_page').val(url);\n        } else if ( $('#redactor_navee').find(\"option[value='\"+url+\"']\").length > 0 ) {\n            redactor.modalSetTab.call(redactor, 4);\n\n            tabSelected.val(4);\n            $('#redactor_navee').val(url);\n        } else {\n            var tab = modal.find('.tab-url');\n            tab.find('.redactor_link').val(url);\n        }\n\n        if (target === '_blank') {\n            modal.find('.redactor_link_blank').attr('checked', true);\n        }\n\n        modal.find('.redactor_tab:visible').find('.redactor_input:first').focus();\n\n        modal.find('.redactor_modal_action_btn').click($.proxy(insertLink, redactor));\n    }\n\n    // ----------------------------------------------------------------------\n\n    function insertLink(event) {\n        var redactor = this;\n        var modal = $('#redactor_modal');\n        var tabSelected = $('#redactor_tab_selected').val();\n        var link = '', text = '', target = '', targetBlank = '';\n        var tab = $('#redactor_tab' + tabSelected);\n\n        link = tab.find('.redactor_link').val();\n        text = tab.find('.redactor_link_text').val();\n\n        if (tab.find('.redactor_link_blank').attr('checked')) {\n            target = ' target=\"_blank\"';\n            targetBlank = '_blank';\n        }\n\n        // URL\n        if (tabSelected === '1') {\n            // test url (add protocol)\n            var pattern = '((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}';\n            var re = new RegExp('^(http|ftp|https)://' + pattern, 'i');\n            var re2 = new RegExp('^' + pattern, 'i');\n\n            if (link.search(re) == -1 && link.search(re2) == 0 && redactor.opts.linkProtocol) {\n                link = redactor.opts.linkProtocol + link;\n            }\n        }\n\n        // MAil\n        else if (tabSelected === '2') {\n            link = 'mailto:' + link;\n        }\n\n        // site pages\n        else if (tabSelected === '3') {\n            // test http\n            re = new RegExp('^https?://', 'i');\n            if (link.search(re) == -1) {\n                link = redactor.opts.protocol + link;\n            }\n        }\n\n\n\n        text = text.replace(/<|>/g, '');\n\n        var extra = '&nbsp;';\n        if (redactor.browser('mozilla')) {\n            extra = '&nbsp;';\n        }\n\n        this.linkInsert('<a href=\"' + link + '\"' + target + '>' + text + '</a>' + extra, $.trim(text), link, targetBlank);\n    }\n\n    // ----------------------------------------------------------------------\n\n    function linkObserver(e) {\n        var $link = $(e.target);\n\n        var parent = $(e.target).parent();\n        if (parent.hasClass('royalSlider') || parent.hasClass('fotorama'))\n        {\n            return;\n        }\n\n        if ($link.size() == 0 || $link[0].tagName !== 'A') return;\n\n        var pos = $link.offset();\n        if (this.opts.iframe)\n        {\n            var posFrame = this.$frame.offset();\n            pos.top = posFrame.top + (pos.top - $(this.document).scrollTop());\n            pos.left += posFrame.left;\n        }\n\n        var tooltip = $('<span class=\"redactor-link-tooltip\"></span>');\n\n        var href = $link.attr('href');\n        if (href === undefined)\n        {\n            href = '';\n        }\n\n        if (href.length > 24) href = href.substring(0, 24) + '...';\n\n        var aLink = $('<a href=\"' + $link.attr('href') + '\" target=\"_blank\">' + href + '</a>').on('click', $.proxy(function(e)\n        {\n            this.linkObserverTooltipClose(false);\n        }, this));\n\n        var aEdit = $('<a href=\"#\">' + this.opts.curLang.edit + '</a>').on('click', $.proxy(function(e)\n        {\n            e.preventDefault();\n            openModal.call(this);\n            this.linkObserverTooltipClose(false);\n\n        }, this));\n\n        var aUnlink = $('<a href=\"#\">' + this.opts.curLang.unlink + '</a>').on('click', $.proxy(function(e)\n        {\n            e.preventDefault();\n            this.execCommand('unlink');\n            this.linkObserverTooltipClose(false);\n\n        }, this));\n\n\n        tooltip.append(aLink);\n        tooltip.append(' | ');\n        tooltip.append(aEdit);\n        tooltip.append(' | ');\n        tooltip.append(aUnlink);\n        tooltip.css({\n            top: (pos.top + 20) + 'px',\n            left: pos.left + 'px'\n        });\n\n        $('.redactor-link-tooltip').remove();\n        $('body').append(tooltip);\n    }\n\n    // ----------------------------------------------------------------------\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.fontcolor = {\n        init: function()\n        {\n            var colors = [\n                '#ffffff', '#000000', '#eeece1', '#1f497d', '#4f81bd', '#c0504d', '#9bbb59', '#8064a2', '#4bacc6', '#f79646', '#ffff00',\n                '#f2f2f2', '#7f7f7f', '#ddd9c3', '#c6d9f0', '#dbe5f1', '#f2dcdb', '#ebf1dd', '#e5e0ec', '#dbeef3', '#fdeada', '#fff2ca',\n                '#d8d8d8', '#595959', '#c4bd97', '#8db3e2', '#b8cce4', '#e5b9b7', '#d7e3bc', '#ccc1d9', '#b7dde8', '#fbd5b5', '#ffe694',\n                '#bfbfbf', '#3f3f3f', '#938953', '#548dd4', '#95b3d7', '#d99694', '#c3d69b', '#b2a2c7', '#b7dde8', '#fac08f', '#f2c314',\n                '#a5a5a5', '#262626', '#494429', '#17365d', '#366092', '#953734', '#76923c', '#5f497a', '#92cddc', '#e36c09', '#c09100',\n                '#7f7f7f', '#0c0c0c', '#1d1b10', '#0f243e', '#244061', '#632423', '#4f6128', '#3f3151', '#31859b',  '#974806', '#7f6000'\n            ];\n\n            var buttons = ['fontcolor', 'backcolor'];\n\n            for (var i = 0; i < 2; i++)\n            {\n                var name = buttons[i];\n\n                var $dropdown = $('<div class=\"redactor_dropdown redactor_dropdown_box_' + name + '\" style=\"display: none; width: 243px;\">');\n\n                this.pickerBuild($dropdown, name, colors);\n                $(this.$toolbar).append($dropdown);\n\n                var btn = this.buttonAdd(name, this.opts.curLang[name], $.proxy(function(btnName, $button, btnObject, e)\n                {\n                    this.dropdownShow(e, btnName);\n\n                }, this));\n\n                btn.data('dropdown', $dropdown);\n            }\n        },\n        pickerBuild: function($dropdown, name, colors)\n        {\n            var rule = 'color';\n            if (name === 'backcolor') rule = 'background-color';\n\n            var _self = this;\n            var onSwatch = function(e)\n            {\n                e.preventDefault();\n\n                var $this = $(this);\n                _self.pickerSet($this.data('rule'), $this.attr('rel'));\n\n            };\n\n            var len = colors.length;\n            for (var z = 0; z < len; z++)\n            {\n                var color = colors[z];\n\n                var $swatch = $('<a rel=\"' + color + '\" data-rule=\"' + rule +'\" href=\"#\" style=\"float: left; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 20px; height: 20px;\"></a>');\n                $swatch.css('background-color', color);\n                $dropdown.append($swatch);\n                $swatch.on('click', onSwatch);\n            }\n\n            var $elNone = $('<a href=\"#\" style=\"display: block; clear: both; padding: 4px 0; font-size: 11px; line-height: 1;\"></a>')\n            .html(this.opts.curLang.none)\n            .on('click', function(e)\n            {\n                e.preventDefault();\n                _self.pickerSet(rule, false);\n            });\n\n            $dropdown.append($elNone);\n        },\n        pickerSet: function(rule, type)\n        {\n            this.bufferSet();\n\n            this.$editor.focus();\n            this.inlineRemoveStyle(rule);\n            if (type !== false) this.inlineSetStyle(rule, type);\n            if (this.opts.air) this.$air.fadeOut(100);\n            this.sync();\n        }\n    };\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.fontfamily = {\n        init: function ()\n        {\n            var fonts = [ 'Arial', 'Helvetica', 'Georgia', 'Times New Roman', 'Monospace' ];\n            var that = this;\n            var dropdown = {};\n\n            $.each(fonts, function(i, s)\n            {\n                dropdown['s' + i] = { title: s, callback: function() { that.setFontfamily(s); }};\n            });\n\n            dropdown['remove'] = { title: 'Remove font', callback: function() { that.resetFontfamily(); }};\n\n            this.buttonAdd('fontfamily', 'Change font family', false, dropdown);\n        },\n        setFontfamily: function (value)\n        {\n            this.inlineSetStyle('font-family', value);\n        },\n        resetFontfamily: function()\n        {\n            this.inlineRemoveStyle('font-family');\n        }\n    };\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.fontsize = {\n        init: function()\n        {\n            var fonts = [10, 11, 12, 14, 16, 18, 20, 24, 28, 30];\n            var that = this;\n            var dropdown = {};\n\n            $.each(fonts, function(i, s)\n            {\n                dropdown['s' + i] = { title: s + 'px', callback: function() { that.setFontsize(s); } };\n            });\n\n            dropdown['remove'] = { title: 'Remove font size', callback: function() { that.resetFontsize(); } };\n\n            this.buttonAdd('fontsize', 'Change font size', false, dropdown);\n        },\n        setFontsize: function(size)\n        {\n            this.inlineSetStyle('font-size', size + 'px');\n        },\n        resetFontsize: function()\n        {\n            this.inlineRemoveStyle('font-size');\n        }\n    };\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.fullscreen = {\n        init: function()\n        {\n            this.fullscreen = false;\n\n            this.buttonAdd('fullscreen', 'Fullscreen', $.proxy(this.toggleFullscreen, this));\n\n            if (this.opts.fullscreen) this.toggleFullscreen();\n        },\n        enableFullScreen: function()\n        {\n            this.buttonChangeIcon('fullscreen', 'normalscreen');\n            this.buttonActive('fullscreen');\n            this.fullscreen = true;\n\n            if (this.opts.toolbarExternal)\n            {\n                this.toolcss = {};\n                this.boxcss = {};\n                this.toolcss.width = this.$toolbar.css('width');\n                this.toolcss.top = this.$toolbar.css('top');\n                this.toolcss.position = this.$toolbar.css('position');\n                this.boxcss.top = this.$box.css('top');\n            }\n\n            this.fsheight = this.$editor.height();\n            if (this.opts.iframe) this.fsheight = this.$frame.height();\n\n            if (this.opts.maxHeight) this.$editor.css('max-height', '');\n            if (this.opts.iframe) var html = this.get();\n\n            if (!this.$fullscreenPlaceholder) this.$fullscreenPlaceholder = $('<div/>');\n            this.$fullscreenPlaceholder.insertAfter(this.$box);\n\n            this.$box.appendTo(document.body);\n\n            this.$box.addClass('redactor_box_fullscreen');\n            $('body, html').css('overflow', 'hidden');\n\n            if (this.opts.iframe) this.fullscreenIframe(html);\n\n            this.fullScreenResize();\n            $(window).resize($.proxy(this.fullScreenResize, this));\n            $(document).scrollTop(0, 0);\n\n            this.focus();\n            this.observeStart();\n        },\n        disableFullScreen: function()\n        {\n            this.buttonRemoveIcon('fullscreen', 'normalscreen');\n            this.buttonInactive('fullscreen');\n            this.fullscreen = false;\n\n            $(window).off('resize', $.proxy(this.fullScreenResize, this));\n            $('body, html').css('overflow', '');\n\n            this.$box.insertBefore(this.$fullscreenPlaceholder);\n            this.$fullscreenPlaceholder.remove();\n\n            this.$box.removeClass('redactor_box_fullscreen').css({ width: 'auto', height: 'auto' });\n\n            if (this.opts.iframe) html = this.$editor.html();\n\n            if (this.opts.iframe) this.fullscreenIframe(html);\n            else this.sync();\n\n            var height = this.fsheight;\n            if (this.opts.autoresize) height = 'auto';\n            if (this.opts.maxHeight) this.$editor.css('max-height', this.opts.maxHeight);\n\n            if (this.opts.toolbarExternal)\n            {\n                this.$box.css('top', this.boxcss.top);\n                this.$toolbar.css({\n                    'width': this.toolcss.width,\n                    'top': this.toolcss.top,\n                    'position': this.toolcss.position\n                });\n            }\n\n            if (!this.opts.iframe) this.$editor.css('height', height);\n            else this.$frame.css('height', height);\n\n            this.$editor.css('height', height);\n            this.focus();\n            this.observeStart();\n        },\n        toggleFullscreen: function()\n        {\n            if (!this.fullscreen)\n            {\n                this.enableFullScreen();\n            }\n            else\n            {\n                this.disableFullScreen();\n            }\n        },\n        fullscreenIframe: function(html)\n        {\n            this.$editor = this.$frame.contents().find('body');\n            this.$editor.attr({ 'contenteditable': true, 'dir': this.opts.direction });\n\n            // set document & window\n            if (this.$editor[0])\n            {\n                this.document = this.$editor[0].ownerDocument;\n                this.window = this.document.defaultView || window;\n            }\n\n            // iframe css\n            this.iframeAddCss();\n\n            if (this.opts.fullpage) this.setFullpageOnInit(html);\n            else this.set(html);\n\n            if (this.opts.wym) this.$editor.addClass('redactor_editor_wym');\n        },\n        fullScreenResize: function()\n        {\n            if (!this.fullscreen) return false;\n\n            var toolbarHeight = this.$toolbar.height();\n\n            var pad = this.$editor.css('padding-top').replace('px', '');\n            var height = $(window).height() - toolbarHeight;\n            this.$box.width($(window).width() - 2).height(height + toolbarHeight);\n\n            if (this.opts.toolbarExternal)\n            {\n                this.$toolbar.css({\n                    'top': '0px',\n                    'position': 'absolute',\n                    'width': '100%'\n                });\n\n                this.$box.css('top', toolbarHeight + 'px');\n            }\n\n            if (!this.opts.iframe) this.$editor.height(height - (pad * 2));\n            else\n            {\n                setTimeout($.proxy(function()\n                {\n                    this.$frame.height(height);\n\n                }, this), 1);\n            }\n\n            this.$editor.height(height);\n        }\n    };\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.textdirection = {\n        init: function()\n        {\n            var that = this;\n            var dropdown = {};\n\n            dropdown['ltr'] = { title: 'Left to right', callback: function () { that.ltrTextDirection(); } };\n            dropdown['rtl'] = { title: 'Right to left', callback: function () { that.rtlTextDirection(); } };\n\n            this.buttonAdd('direction', 'Change direction', false, dropdown);\n        },\n        rtlTextDirection: function()\n        {\n            this.bufferSet();\n            this.blockSetAttr('dir', 'rtl');\n        },\n        ltrTextDirection: function()\n        {\n            this.bufferSet();\n            this.blockRemoveAttr('dir');\n        }\n    };\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.paste_plain = {\n        init: function() {\n            var index = $.inArray('paste_plain', this.opts.buttons);\n            var button;\n\n            if (index == -1) return;\n\n            if (index === 0) {\n                button = this.buttonAddFirst('paste_plain', 'Paste Plain', openModal);\n            } else {\n                button = this.buttonAddAfter(this.opts.buttons[index-1], 'paste_plain', 'Paste Plain', openModal);\n            }\n\n            if (!button || button.length === 0) return;\n\n            //\n            button.removeClass('redactor-btn-image');\n            //button.addClass('fa-redactor-btn');\n            button.html('<i class=\"dicon-clipboard\"></i>');\n        }\n    };\n\n    // ----------------------------------------------------------------------\n\n    function openModal(btnName, buttonElem, btnObject, event) {\n        var redactor = this;\n        redactor.selectionSave();\n\n        var tdata = {};\n\n        // title, content, width, callback\n        redactor.modalInit('Paste Plain Text', Editor.Templates.plugins_paste_plain(tdata), 600, $.proxy(modalInitCallback, redactor));\n    }\n\n    // ----------------------------------------------------------------------\n\n    function modalInitCallback() {\n        var redactor = this;\n        var modal = $('#redactor_modal');\n\n        modal.find('textarea')[0].focus();\n        modal.find('.redactor_modal_action_btn').click($.proxy(savePaste, redactor));\n    }\n\n    // ----------------------------------------------------------------------\n\n    function savePaste(event) {\n        var redactor = this;\n\n        var content = $('#redactor_paste_plaintext_area').val();\n        content = redactor.cleanParagraphy(content);\n\n        redactor.selectionRestore();\n        redactor.insertHtml(content);\n        redactor.sync();\n        redactor.modalClose();\n    }\n\n    // ----------------------------------------------------------------------\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.styles = {\n        init: function() {\n            var redactor = this;\n            var redactorBox = redactor.getBox();\n            var button;\n            var index = $.inArray('styles', this.opts.buttons);\n            if (index == -1) return;\n\n            var dropdown = {};\n            if (typeof(Editor.settings) == 'undefined') Editor.settings = {};\n            if (typeof(Editor.settings.styles) == 'undefined') Editor.settings.styles = {};\n            if (typeof(Editor.settings.styles.styles) == 'undefined') Editor.settings.styles.styles = [];\n\n            var styles = Editor.settings.styles.styles;\n\n            for (var i = 0; i < styles.length; i++) {\n                dropdown['style_'+i] = {\n                    title: styles[i].title,\n                    className: 'style_'+i,\n                    callback: applyStyle\n                };\n            }\n\n            if (index === 0) {\n                button = this.buttonAddFirst('styles', 'Styles', null, dropdown);\n            } else {\n                button = this.buttonAddAfter(this.opts.buttons[index-1], 'styles', 'Styles', null, dropdown);\n            }\n\n            if (!button || button.length === 0) return;\n\n            //\n            button.removeClass('redactor-btn-image');\n            //button.addClass('fa-redactor-btn');\n            button.html('<i class=\"dicon-brush\"></i>');\n\n            redactorBox.bind('redactor.dropdownshow', function(evt, redactorObj, options){\n\n                for (var ii = 0; ii < styles.length; ii++) {\n                    options.dropdown.find('.'+'style_'+ii).addClass(styles[ii].btn_class).attr({\n                        'style':styles[ii].btn_style,\n                        'data-key': ii\n                    });\n                }\n            });\n        }\n    };\n\n    // ----------------------------------------------------------------------\n\n    function applyStyle(btnName, btnElem, btnObject, event) {\n        var redactor = this;\n        redactor.selectionSave();\n        redactor.bufferSet();\n\n        if (redactor.getCurrent().className == 'redactor_box') {\n            return;\n        }\n\n        if (redactor.getCurrent().tagName.toLowerCase() == 'body') {\n            return;\n        }\n\n\n        //var key = event.target.getAttribute('data-key');\n        var key = btnName.substr(6);\n        var tmpl = Editor.settings.styles.styles[key];\n        var elem, temp;\n\n        // Lets parse the attributes\n        var attributes = {};\n        if (tmpl.attr){\n            temp = $('<div '+tmpl.attr+'>');\n\n            for (var i = temp[0].attributes.length - 1; i >= 0; i--) {\n                attributes[temp[0].attributes[i].name] = temp[0].attributes[i].value;\n            }\n\n        }\n\n        tmpl.attr_obj = attributes;\n\n        // Lets parse the styles\n        var styles = {};\n        if (tmpl.styles){\n            temp = tmpl.styles.split(';');\n\n            for (var i = temp.length - 1; i >= 0; i--) {\n                temp[i] = temp[i].split(':');\n\n                if (typeof temp[i][1] != 'undefined') {\n                    styles[temp[i][0]] = temp[i][1];\n                }\n            }\n        }\n        tmpl.styles_obj = styles;\n\n        var selection = redactor.getSelectionHtml();\n        var selection_obj = $(selection);\n\n\n        // If empty string\n        if (!selection) {\n            tmpl.type = 'current';\n        }\n\n        if (selection_obj.length > 0) {\n            alert('Applying styles to multiple paragraph is not supported');\n            return;\n        }\n\n        if (tmpl.type == 'inline') {\n            execStyle('inline', redactor, tmpl, selection);\n        }\n\n        else if (tmpl.type == 'block') {\n            execStyle('block', redactor, tmpl, selection);\n        }\n\n        else if (tmpl.type == 'custom') {\n            execStyle('custom', redactor, tmpl, selection);\n        }\n\n        else if (tmpl.type == 'current') {\n            elem = $(redactor.getCurrent());\n            elem.attr('style', tmpl.styles);\n            elem.attr(tmpl.attr_obj);\n            elem.addClass(tmpl.classes);\n            Editor.TriggerRedactorCleanup(redactor);\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n    function execStyle(type, redactor, tmpl, selection){\n\n        var elem = $(redactor.getCurrent());\n        var temp;\n\n        if (type == 'inline') {\n            temp = $('<div><span></span></div>').find('span');\n\n            for (var style in tmpl.styles_obj) {\n                //redactor.inlineSetStyle(style, tmpl.styles_obj[style]);\n            }\n\n        } else if (type == 'block') {\n            temp = $('<div><div></div></div>').find('div');\n        } else if (type == 'custom') {\n            temp = $('<div><'+tmpl.custom_type+'></'+tmpl.custom_type+'></div>').find(tmpl.custom_type);\n        } else {\n            temp = $('<div><span></span></div>').find('span');\n        }\n\n        temp.attr('style', tmpl.styles).attr('class', tmpl.classes).attr(tmpl.attr_obj).html(selection);\n/*\n        if (type == 'inline') {\n            replaceSelectedText(temp);\n            redactor.sync();\n            return;\n        }\n*/\n        // The other ones no longer work!\n\n        temp = temp.parent().html();\n\n        elem.html(elem.html().replace(selection, temp) );\n\n        redactor.selectionRestore();\n\n        //Editor.TriggerRedactorCleanup(redactor);\n    }\n\n    // ----------------------------------------------------------------------\n\n    function replaceSelectedText(replacementText) {\n        var sel, range;\n        if (window.getSelection) {\n            sel = window.getSelection();\n            if (sel.rangeCount) {\n                range = sel.getRangeAt(0);\n                range.deleteContents();\n\n                if (typeof replacementText == 'string') {\n                    range.insertNode(document.createTextNode(replacementText));\n                } else {\n                    range.insertNode(replacementText[0]);\n                }\n            }\n        } else if (document.selection && document.selection.createRange) {\n            range = document.selection.createRange();\n            range.text = replacementText;\n        }\n    }\n\n    // ----------------------------------------------------------------------\n\n\n}(window, jQuery));",";(function(global, $){\n    //es5 strict mode\n    \"use strict\";\n\n    var RedactorPlugins = global.RedactorPlugins = global.RedactorPlugins || {};\n    var Editor = global.Editor = global.Editor || {};\n\n    // ----------------------------------------------------------------------\n\n    RedactorPlugins.templates = {\n        init: function() {\n            var index = $.inArray('templates', this.opts.buttons);\n            if (index == -1) return;\n\n            var dropdown = {};\n            var button;\n            if (typeof(Editor.settings) == 'undefined') Editor.settings = {};\n            if (typeof(Editor.settings.templates) == 'undefined') Editor.settings.templates = {};\n            if (typeof(Editor.settings.templates.templates) == 'undefined') Editor.settings.templates.templates = [];\n\n            var templates = Editor.settings.templates.templates;\n\n            for (var i = 0; i < templates.length; i++) {\n                dropdown['template_'+i] = {\n                    title: templates[i].title,\n                    className: 'template_'+i,\n                    callback: applyTemplate\n                };\n            }\n\n            if (index === 0) {\n                button = this.buttonAddFirst('templates', 'Templates', null, dropdown);\n            } else {\n                button = this.buttonAddAfter(this.opts.buttons[index-1], 'templates', 'Templates', null, dropdown);\n            }\n\n            if (!button || button.length === 0) return;\n\n            //\n            button.removeClass('redactor-btn-image');\n            //button.addClass('fa-redactor-btn');\n            button.html('<i class=\"dicon-page-blocks\"></i>');\n\n            var dropdownElem = $(button.closest('.redactor_toolbar').find('.redactor_dropdown_box_templates'));\n\n            for (var i = 0; i < templates.length; i++) {\n                dropdownElem.find('.'+'template_'+i).addClass(templates[i].btn_class).attr({\n                    'data-key': i\n                });\n            }\n        }\n    };\n\n    // ----------------------------------------------------------------------\n\n    function applyTemplate(btnName, btnElem, btnObject, event) {\n        var redactor = this;\n        redactor.selectionSave();\n        redactor.bufferSet();\n\n        if (redactor.getCurrent().className == 'redactor_box') {\n            return;\n        }\n\n        if (redactor.getCurrent().tagName.toLowerCase() == 'body') {\n            return;\n        }\n\n        var key = btnName.substr(9);\n        var tmpl = Editor.settings.templates.templates[key];\n        var html = tmpl.html;\n\n        redactor.selectionRestore();\n        redactor.insertHtml(html);\n        redactor.sync();\n    }\n\n    // ----------------------------------------------------------------------\n\n}(window, jQuery));"]}