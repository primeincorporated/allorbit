!function(a,b){"use strict";function c(){Matrix.bind("editor","display",function(a){var c=b("textarea",a.dom.$td),d=Editor.matrixColConfigs[a.col.id],e=a.field.id+"_"+a.row.id+"_"+a.col.id+"_"+Math.floor(1e8*Math.random());e=e.replace(/\[/,"_").replace(/\]/,""),c.attr("id",e),jQuery("#"+e).redactor(d),a.dom.$td.addClass("editor-matrix")})}var d=(a.RedactorPlugins=a.RedactorPlugins||{},a.Handlebars=a.Handlebars||{});Editor.matrixColConfigs={},Editor.contentElementsConfig={},Editor.gridConfig={},jQuery(document).ready(function(){"undefined"!=typeof window.Matrix&&c()}),d.registerHelper("setIndex",function(a){this.parentIndex=Number(a)}),Editor.dropdownShowCallback=function(a){var b=this,c=b.getBox();c.trigger("redactor.dropdownshow",[b,a])},Editor.UploadCallback=function(){},Editor.TriggerRedactorCleanup=function(a){for(var b=0;5>b;b++)setTimeout(function(){a.sync(),a.opts.visual=!1,a.toggle()},100*b)}}(window,jQuery),function(a,b){"use strict";function c(a,b,c,d){e.openModal(a,b,c,d,this)}var d=a.RedactorPlugins=a.RedactorPlugins||{},e=a.ChannelImages=a.ChannelImages||{};d.channel_images={init:function(){var a,d=b.inArray("channel_images",this.opts.buttons);return-1==d?void console.log("Editor: Channel Images plugin disabled - Not in buttons config"):b.isEmptyObject(e)===!0?void console.log("Editor: Channel Images plugin disabled - No Channel Images object found"):(a=0===d?this.buttonAddFirst("channel_images","Channel Images",c):this.buttonAddAfter(this.opts.buttons[d-1],"channel_images","Channel Images",c),void(a&&0!==a.length&&(a.removeClass("redactor-btn-image"),a.html('<i class="dicon-images"></i>'))))}}}(window,jQuery),function(a,b){"use strict";{var c=a.RedactorPlugins=a.RedactorPlugins||{};a.Editor=a.Editor||{}}c.dd_keyboard_shortcuts={init:function(){this.$editor.parent().on("keydown",b.proxy(function(a){var b=a.which,c=a.ctrlKey||a.metaKey;return c&&68===b?(a.preventDefault(),this.toggle(),!1):void 0},this))}}}(window,jQuery),function(a,b){"use strict";function c(){var a=this;a.selectionSave();var c={};c.showSitePages=Editor.site_pages,c.showNavee=Editor.navee,c.sitePages=Editor.site_pages?Editor.site_pages:"",a.modalInit("Link",Editor.Templates.plugins_link(c),600,b.proxy(d,a))}function d(){var a=this,c=b("#redactor_modal"),d=b("#redactor_tab_selected");a.insert_link_node=!1;var f=a.getSelection(),g="",h="",i="",j=a.getParent(),k=b(j).parent().get(0);k&&"A"===k.tagName&&(j=k),j&&"A"===j.tagName?(g=j.href,h=b(j).text(),i=j.target,a.insert_link_node=j):h=f.toString(),c.find(".redactor_link_text").val(h);var l=self.location.href.replace(/\/$/i,"");if(g=g.replace(l,""),g=g.replace(/^\/#/,"#"),0===g.search("mailto:")){var m=c.find(".tab-email");a.modalSetTab.call(a,2),d.val(2),m.find(".redactor_link").val(g.replace("mailto:",""))}else if(b("#redactor_site_page").find("option[value='"+g+"']").length>0)a.modalSetTab.call(a,3),d.val(3),b("#redactor_site_page").val(g);else if(b("#redactor_navee").find("option[value='"+g+"']").length>0)a.modalSetTab.call(a,4),d.val(4),b("#redactor_navee").val(g);else{var m=c.find(".tab-url");m.find(".redactor_link").val(g)}"_blank"===i&&c.find(".redactor_link_blank").attr("checked",!0),c.find(".redactor_tab:visible").find(".redactor_input:first").focus(),c.find(".redactor_modal_action_btn").click(b.proxy(e,a))}function e(){var a=this,c=(b("#redactor_modal"),b("#redactor_tab_selected").val()),d="",e="",f="",g="",h=b("#redactor_tab"+c);if(d=h.find(".redactor_link").val(),e=h.find(".redactor_link_text").val(),h.find(".redactor_link_blank").attr("checked")&&(f=' target="_blank"',g="_blank"),"1"===c){var i="((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}",j=new RegExp("^(http|ftp|https)://"+i,"i"),k=new RegExp("^"+i,"i");-1==d.search(j)&&0==d.search(k)&&a.opts.linkProtocol&&(d=a.opts.linkProtocol+d)}else"2"===c?d="mailto:"+d:"3"===c&&(j=new RegExp("^https?://","i"),-1==d.search(j)&&(d=a.opts.protocol+d));e=e.replace(/<|>/g,"");var l="&nbsp;";a.browser("mozilla")&&(l="&nbsp;"),this.linkInsert('<a href="'+d+'"'+f+">"+e+"</a>"+l,b.trim(e),d,g)}function f(a){var d=b(a.target),e=b(a.target).parent();if(!e.hasClass("royalSlider")&&!e.hasClass("fotorama")&&0!=d.size()&&"A"===d[0].tagName){var f=d.offset();if(this.opts.iframe){var g=this.$frame.offset();f.top=g.top+(f.top-b(this.document).scrollTop()),f.left+=g.left}var h=b('<span class="redactor-link-tooltip"></span>'),i=d.attr("href");void 0===i&&(i=""),i.length>24&&(i=i.substring(0,24)+"...");var j=b('<a href="'+d.attr("href")+'" target="_blank">'+i+"</a>").on("click",b.proxy(function(){this.linkObserverTooltipClose(!1)},this)),k=b('<a href="#">'+this.opts.curLang.edit+"</a>").on("click",b.proxy(function(a){a.preventDefault(),c.call(this),this.linkObserverTooltipClose(!1)},this)),l=b('<a href="#">'+this.opts.curLang.unlink+"</a>").on("click",b.proxy(function(a){a.preventDefault(),this.execCommand("unlink"),this.linkObserverTooltipClose(!1)},this));h.append(j),h.append(" | "),h.append(k),h.append(" | "),h.append(l),h.css({top:f.top+20+"px",left:f.left+"px"}),b(".redactor-link-tooltip").remove(),b("body").append(h)}}var g=a.RedactorPlugins=a.RedactorPlugins||{},Editor=a.Editor=a.Editor||{};g.link={init:function(){var a,d=this,e=b.inArray("link",this.opts.buttons);-1!=e&&(this.buttonRemove("link"),a=0===e?this.buttonAddFirst("link","Link",c):this.buttonAddAfter(this.opts.buttons[e-1],"link","Link",c),a&&0!==a.length&&(this.linkObserver=b.proxy(f,d)))}}}(window,jQuery),function(a,b){"use strict";{var c=a.RedactorPlugins=a.RedactorPlugins||{};a.Editor=a.Editor||{}}c.fontcolor={init:function(){for(var a=["#ffffff","#000000","#eeece1","#1f497d","#4f81bd","#c0504d","#9bbb59","#8064a2","#4bacc6","#f79646","#ffff00","#f2f2f2","#7f7f7f","#ddd9c3","#c6d9f0","#dbe5f1","#f2dcdb","#ebf1dd","#e5e0ec","#dbeef3","#fdeada","#fff2ca","#d8d8d8","#595959","#c4bd97","#8db3e2","#b8cce4","#e5b9b7","#d7e3bc","#ccc1d9","#b7dde8","#fbd5b5","#ffe694","#bfbfbf","#3f3f3f","#938953","#548dd4","#95b3d7","#d99694","#c3d69b","#b2a2c7","#b7dde8","#fac08f","#f2c314","#a5a5a5","#262626","#494429","#17365d","#366092","#953734","#76923c","#5f497a","#92cddc","#e36c09","#c09100","#7f7f7f","#0c0c0c","#1d1b10","#0f243e","#244061","#632423","#4f6128","#3f3151","#31859b","#974806","#7f6000"],c=["fontcolor","backcolor"],d=0;2>d;d++){var e=c[d],f=b('<div class="redactor_dropdown redactor_dropdown_box_'+e+'" style="display: none; width: 243px;">');this.pickerBuild(f,e,a),b(this.$toolbar).append(f);var g=this.buttonAdd(e,this.opts.curLang[e],b.proxy(function(a,b,c,d){this.dropdownShow(d,a)},this));g.data("dropdown",f)}},pickerBuild:function(a,c,d){var e="color";"backcolor"===c&&(e="background-color");for(var f=this,g=function(a){a.preventDefault();var c=b(this);f.pickerSet(c.data("rule"),c.attr("rel"))},h=d.length,i=0;h>i;i++){var j=d[i],k=b('<a rel="'+j+'" data-rule="'+e+'" href="#" style="float: left; font-size: 0; border: 2px solid #fff; padding: 0; margin: 0; width: 20px; height: 20px;"></a>');k.css("background-color",j),a.append(k),k.on("click",g)}var l=b('<a href="#" style="display: block; clear: both; padding: 4px 0; font-size: 11px; line-height: 1;"></a>').html(this.opts.curLang.none).on("click",function(a){a.preventDefault(),f.pickerSet(e,!1)});a.append(l)},pickerSet:function(a,b){this.bufferSet(),this.$editor.focus(),this.inlineRemoveStyle(a),b!==!1&&this.inlineSetStyle(a,b),this.opts.air&&this.$air.fadeOut(100),this.sync()}}}(window,jQuery),function(a,b){"use strict";{var c=a.RedactorPlugins=a.RedactorPlugins||{};a.Editor=a.Editor||{}}c.fontfamily={init:function(){var a=["Arial","Helvetica","Georgia","Times New Roman","Monospace"],c=this,d={};b.each(a,function(a,b){d["s"+a]={title:b,callback:function(){c.setFontfamily(b)}}}),d.remove={title:"Remove font",callback:function(){c.resetFontfamily()}},this.buttonAdd("fontfamily","Change font family",!1,d)},setFontfamily:function(a){this.inlineSetStyle("font-family",a)},resetFontfamily:function(){this.inlineRemoveStyle("font-family")}}}(window,jQuery),function(a,b){"use strict";{var c=a.RedactorPlugins=a.RedactorPlugins||{};a.Editor=a.Editor||{}}c.fontsize={init:function(){var a=[10,11,12,14,16,18,20,24,28,30],c=this,d={};b.each(a,function(a,b){d["s"+a]={title:b+"px",callback:function(){c.setFontsize(b)}}}),d.remove={title:"Remove font size",callback:function(){c.resetFontsize()}},this.buttonAdd("fontsize","Change font size",!1,d)},setFontsize:function(a){this.inlineSetStyle("font-size",a+"px")},resetFontsize:function(){this.inlineRemoveStyle("font-size")}}}(window,jQuery),function(a,b){"use strict";{var c=a.RedactorPlugins=a.RedactorPlugins||{};a.Editor=a.Editor||{}}c.fullscreen={init:function(){this.fullscreen=!1,this.buttonAdd("fullscreen","Fullscreen",b.proxy(this.toggleFullscreen,this)),this.opts.fullscreen&&this.toggleFullscreen()},enableFullScreen:function(){if(this.buttonChangeIcon("fullscreen","normalscreen"),this.buttonActive("fullscreen"),this.fullscreen=!0,this.opts.toolbarExternal&&(this.toolcss={},this.boxcss={},this.toolcss.width=this.$toolbar.css("width"),this.toolcss.top=this.$toolbar.css("top"),this.toolcss.position=this.$toolbar.css("position"),this.boxcss.top=this.$box.css("top")),this.fsheight=this.$editor.height(),this.opts.iframe&&(this.fsheight=this.$frame.height()),this.opts.maxHeight&&this.$editor.css("max-height",""),this.opts.iframe)var a=this.get();this.$fullscreenPlaceholder||(this.$fullscreenPlaceholder=b("<div/>")),this.$fullscreenPlaceholder.insertAfter(this.$box),this.$box.appendTo(document.body),this.$box.addClass("redactor_box_fullscreen"),b("body, html").css("overflow","hidden"),this.opts.iframe&&this.fullscreenIframe(a),this.fullScreenResize(),b(window).resize(b.proxy(this.fullScreenResize,this)),b(document).scrollTop(0,0),this.focus(),this.observeStart()},disableFullScreen:function(){this.buttonRemoveIcon("fullscreen","normalscreen"),this.buttonInactive("fullscreen"),this.fullscreen=!1,b(window).off("resize",b.proxy(this.fullScreenResize,this)),b("body, html").css("overflow",""),this.$box.insertBefore(this.$fullscreenPlaceholder),this.$fullscreenPlaceholder.remove(),this.$box.removeClass("redactor_box_fullscreen").css({width:"auto",height:"auto"}),this.opts.iframe&&(html=this.$editor.html()),this.opts.iframe?this.fullscreenIframe(html):this.sync();var a=this.fsheight;this.opts.autoresize&&(a="auto"),this.opts.maxHeight&&this.$editor.css("max-height",this.opts.maxHeight),this.opts.toolbarExternal&&(this.$box.css("top",this.boxcss.top),this.$toolbar.css({width:this.toolcss.width,top:this.toolcss.top,position:this.toolcss.position})),this.opts.iframe?this.$frame.css("height",a):this.$editor.css("height",a),this.$editor.css("height",a),this.focus(),this.observeStart()},toggleFullscreen:function(){this.fullscreen?this.disableFullScreen():this.enableFullScreen()},fullscreenIframe:function(a){this.$editor=this.$frame.contents().find("body"),this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(a):this.set(a),this.opts.wym&&this.$editor.addClass("redactor_editor_wym")},fullScreenResize:function(){if(!this.fullscreen)return!1;var a=this.$toolbar.height(),c=this.$editor.css("padding-top").replace("px",""),d=b(window).height()-a;this.$box.width(b(window).width()-2).height(d+a),this.opts.toolbarExternal&&(this.$toolbar.css({top:"0px",position:"absolute",width:"100%"}),this.$box.css("top",a+"px")),this.opts.iframe?setTimeout(b.proxy(function(){this.$frame.height(d)},this),1):this.$editor.height(d-2*c),this.$editor.height(d)}}}(window,jQuery),function(a){"use strict";{var b=a.RedactorPlugins=a.RedactorPlugins||{};a.Editor=a.Editor||{}}b.textdirection={init:function(){var a=this,b={};b.ltr={title:"Left to right",callback:function(){a.ltrTextDirection()}},b.rtl={title:"Right to left",callback:function(){a.rtlTextDirection()}},this.buttonAdd("direction","Change direction",!1,b)},rtlTextDirection:function(){this.bufferSet(),this.blockSetAttr("dir","rtl")},ltrTextDirection:function(){this.bufferSet(),this.blockRemoveAttr("dir")}}}(window,jQuery),function(a,b){"use strict";function c(){var a=this;a.selectionSave();var c={};a.modalInit("Paste Plain Text",Editor.Templates.plugins_paste_plain(c),600,b.proxy(d,a))}function d(){var a=this,c=b("#redactor_modal");c.find("textarea")[0].focus(),c.find(".redactor_modal_action_btn").click(b.proxy(e,a))}function e(){var a=this,c=b("#redactor_paste_plaintext_area").val();c=a.cleanParagraphy(c),a.selectionRestore(),a.insertHtml(c),a.sync(),a.modalClose()}var f=a.RedactorPlugins=a.RedactorPlugins||{},Editor=a.Editor=a.Editor||{};f.paste_plain={init:function(){var a,d=b.inArray("paste_plain",this.opts.buttons);-1!=d&&(a=0===d?this.buttonAddFirst("paste_plain","Paste Plain",c):this.buttonAddAfter(this.opts.buttons[d-1],"paste_plain","Paste Plain",c),a&&0!==a.length&&(a.removeClass("redactor-btn-image"),a.html('<i class="dicon-clipboard"></i>')))}}}(window,jQuery),function(a,b){"use strict";function c(a){var c=this;if(c.selectionSave(),c.bufferSet(),"redactor_box"!=c.getCurrent().className&&"body"!=c.getCurrent().tagName.toLowerCase()){var e,f,g=a.substr(6),h=Editor.settings.styles.styles[g],i={};if(h.attr){f=b("<div "+h.attr+">");for(var j=f[0].attributes.length-1;j>=0;j--)i[f[0].attributes[j].name]=f[0].attributes[j].value}h.attr_obj=i;var k={};if(h.styles){f=h.styles.split(";");for(var j=f.length-1;j>=0;j--)f[j]=f[j].split(":"),"undefined"!=typeof f[j][1]&&(k[f[j][0]]=f[j][1])}h.styles_obj=k;var l=c.getSelectionHtml(),m=b(l);return l||(h.type="current"),m.length>0?void alert("Applying styles to multiple paragraph is not supported"):void("inline"==h.type?d("inline",c,h,l):"block"==h.type?d("block",c,h,l):"custom"==h.type?d("custom",c,h,l):"current"==h.type&&(e=b(c.getCurrent()),e.attr("style",h.styles),e.attr(h.attr_obj),e.addClass(h.classes),Editor.TriggerRedactorCleanup(c)))}}function d(a,c,d,e){var f,g=b(c.getCurrent());if("inline"==a){f=b("<div><span></span></div>").find("span");for(var h in d.styles_obj);}else f="block"==a?b("<div><div></div></div>").find("div"):"custom"==a?b("<div><"+d.custom_type+"></"+d.custom_type+"></div>").find(d.custom_type):b("<div><span></span></div>").find("span");f.attr("style",d.styles).attr("class",d.classes).attr(d.attr_obj).html(e),f=f.parent().html(),g.html(g.html().replace(e,f)),c.selectionRestore()}var e=a.RedactorPlugins=a.RedactorPlugins||{},Editor=a.Editor=a.Editor||{};e.styles={init:function(){var a,d=this,e=d.getBox(),f=b.inArray("styles",this.opts.buttons);if(-1!=f){var g={};"undefined"==typeof Editor.settings&&(Editor.settings={}),"undefined"==typeof Editor.settings.styles&&(Editor.settings.styles={}),"undefined"==typeof Editor.settings.styles.styles&&(Editor.settings.styles.styles=[]);for(var h=Editor.settings.styles.styles,i=0;i<h.length;i++)g["style_"+i]={title:h[i].title,className:"style_"+i,callback:c};a=0===f?this.buttonAddFirst("styles","Styles",null,g):this.buttonAddAfter(this.opts.buttons[f-1],"styles","Styles",null,g),a&&0!==a.length&&(a.removeClass("redactor-btn-image"),a.html('<i class="dicon-brush"></i>'),e.bind("redactor.dropdownshow",function(a,b,c){for(var d=0;d<h.length;d++)c.dropdown.find(".style_"+d).addClass(h[d].btn_class).attr({style:h[d].btn_style,"data-key":d})}))}}}}(window,jQuery),function(a,b){"use strict";function c(a){var b=this;if(b.selectionSave(),b.bufferSet(),"redactor_box"!=b.getCurrent().className&&"body"!=b.getCurrent().tagName.toLowerCase()){var c=a.substr(9),d=Editor.settings.templates.templates[c],e=d.html;b.selectionRestore(),b.insertHtml(e),b.sync()}}var d=a.RedactorPlugins=a.RedactorPlugins||{},Editor=a.Editor=a.Editor||{};d.templates={init:function(){var a=b.inArray("templates",this.opts.buttons);if(-1!=a){var d,e={};"undefined"==typeof Editor.settings&&(Editor.settings={}),"undefined"==typeof Editor.settings.templates&&(Editor.settings.templates={}),"undefined"==typeof Editor.settings.templates.templates&&(Editor.settings.templates.templates=[]);for(var f=Editor.settings.templates.templates,g=0;g<f.length;g++)e["template_"+g]={title:f[g].title,className:"template_"+g,callback:c};if(d=0===a?this.buttonAddFirst("templates","Templates",null,e):this.buttonAddAfter(this.opts.buttons[a-1],"templates","Templates",null,e),d&&0!==d.length){d.removeClass("redactor-btn-image"),d.html('<i class="dicon-page-blocks"></i>');for(var h=b(d.closest(".redactor_toolbar").find(".redactor_dropdown_box_templates")),g=0;g<f.length;g++)h.find(".template_"+g).addClass(f[g].btn_class).attr({"data-key":g})}}}}}(window,jQuery);
//# sourceMappingURL=pbf.min.js.map